% !TeX encoding = windows-1250

\chapter{Realizacja czêœci praktycznej}
\label{t:impementation}
Czêœæ pracy dotycz¹ca realizacji czêœci praktycznej ma na celu pokazanie w jaki sposób mo¿na stworzyæ paczkê modularnych assetów stosuj¹c siê do zasad opisanych we wczeœniejszych rozdzia³ach. Ka¿dy z wykonanych kroków zosta³ pokazany za pomoc¹ opisu wykonania oraz poparty rysunkami i zrzutami ekranu pozwalaj¹cymi zobaczyæ efekt pracy. Nale¿y jednak dodaæ, ¿e nie ka¿dy z wymienionych wczeœniej kroków zosta³ wykonany w pe³ni zgodnie z jego opisem. Tyczy siê to zw³aszcza tych, które dotyczy³y stricte pracy w wiêkszym zespole i mog³y zosta³y uproszczone lub zast¹pione rozwi¹zaniami bardziej pasuj¹cymi do tworzenia bez wspó³pracowników.
\section{Inspiracja i Ÿród³o grafiki koncepcyjnej}
Grafika koncepcyjna, jak i sam pomys³ na stworzenie pracy zosta³ zainspirowany comiesiêcznym wyzwaniem stawianym przed u¿ytkownikami forum \textit{polycount.com}. Polega ono na jak najciekawszym odwzorowaniu fragmentu poziomu ukazanego na za³¹czonej grafice koncepcyjnej. Zasady konkursu s¹ doœæ proste i zwykle aktywnie uczestniczy w nim przynajmniej kilka osób z szerokiego grona u¿ytkowników forum. Najwa¿niejsze regu³y, których musz¹ trzymaæ siê twórcy, to: \cite{NoobChallengeMay2015}
\begin{itemize}
	\item Prace musz¹ byæ w ca³oœci wykonane samodzielnie. Nie ma ograniczeñ co do czasu stworzenia danego elementu, jednak nie wolno ich zapo¿yczaæ od innych twórców (ale mo¿na wykorzystywaæ tekstury wykonane nawet kilka miesiêcy wczeœniej w ramach innego projektu)
	\item Poziom musi zostaæ zaprezentowany w dowolnym silniku gry komputerowej. Twórcy sugeruj¹ u¿ycie \textit{CryEngine 3}, jednak bez ¿adnych przeszkód mo¿na wykorzystaæ konkurencyjne technologie.
	\item Pracê nale¿y ukoñczyæ przed up³yniêciem narzuconego terminu (zwykle jest to 30 dni od daty publikacji postu na forum)
\end{itemize}
Dodatkowo, twórcy nie zalecaj¹ wykorzystywania programów s³u¿¹cych do szybkiego generowania assetów. Przyk³adem takiego mo¿e byæ Quixel dDo - program pozwalaj¹cy na generowanie tekstur ró¿nych powierzchni na podstawie wczeœniej stworzonych map (jak na przyk³ad normal mapa, któr¹ mo¿na stworzyæ za pomocn¹ innych programów) oraz danych wprowadzonych przez u¿ytkownika. \newline

Grafika koncepcyjna bêd¹ca podstaw¹ realizacji czêœci praktycznej pracy zosta³a zaczerpniêta z jednej z edycji \textit{Monthly Community Noob Challenge}. W maju 2015 roku postawiono przed u¿ytkownikami forum wyzwanie stworzenia wnêtrza œwi¹tyni. Obraz, na którym wzorowali siê uczestnicy by³ równie¿ punktem wyjœcia dla realizacji tej pracy:
	\begin{figure}[!ht]
		\centering
		\includegraphics[scale = 0.45]{figures/My_concept}
		\caption{Grafika koncepcyjna zaprezentowana w \textit{Monthly Community Noob Challenge 30} (Ÿród³o: \cite{NoobChallengeMay2015})}
	\end{figure}
\section{Faza projektowania}
Podczas preprodukcji szczególny nacisk zosta³ po³o¿ony na opracowaniu takiego schematu dzia³ania, aby móg³ on zostaæ w praktyce wdro¿ony do pracy wiêkszego zespo³u i oszczêdza³ mo¿liwie jak najwiêcej czasu podczas fazy produkcji. Przy tworzeniu pracy zosta³y wykorzystane narzêdzia nieprzystosowane do pracy w zespole, jednak te same metody mog¹ zostaæ wykorzystane przy u¿yciu innych programów, które zostan¹ zaproponowane podczas opisu realizacji. \newline

Pierwszym krokiem podczas fazy projektowej by³ rozk³ad sceny na modu³y. Powsta³y w ten sposób dwa nowe obrazki:
\begin{itemize}
	\item Podzia³ z uwzglêdnieniem modularnych modeli (przy czym pominiêto œciany, sufity i pod³ogi dla zachowania lepszej czytelnoœci)
	\item Podzia³ z uwzglêdnieniem tekstur, które znajd¹ siê w finalnym atlasie
\end{itemize}
Efekt pracy mo¿na zobaczyæ na rysunku 4.2.
	\begin{figure}[!ht]
		\centering
		\includegraphics[scale = 0.30]{figures/My_breakdown}
		\caption{Podzia³ na modularne modele i tekstury wybranej do realizacji grafiki koncepcyjnej (Ÿród³o: opracowanie w³asne)}
	\end{figure}
	
Kolejnym etapem by³o utworzenie dokumentacji projektowej, która pozwala³aby na konsolidacjê procesu twórczego stosowanego przez zespo³y grafików i projektantów. Tutaj szczególny nacisk zosta³ po³o¿ony na odnalezieniu optymalnych rozwi¹zañ dla takiego zespo³u. \newline

\textbf{Stworzenie listy assetów do wymodelowania i oteksturowania.} \newline 

Podczas tworzenia tej pracy zosta³ wykorzystany pakiet \textit{LibreOffice}, który pozwala³ na proste i logiczne posegregowanie ca³oœci w arkuszu kalkulacyjnym. Utworzone zestawienia modeli i tekstur mo¿na zobaczyæ na rysunkach 4.3 oraz 4.4.
	\begin{figure}[!ht]
		\centering
		\includegraphics[scale = 0.50]{figures/Models_list}
		\caption{Lista modeli do wykonania podczas realizacji czêœci praktycznej pracy (Ÿród³o: opracowanie w³asne)}
	\end{figure}
	\begin{figure}[!ht]
		\centering
		\includegraphics[scale = 0.40]{figures/Textures_list}
		\caption{Lista tekstur do wykonania podczas realizacji czêœci praktycznej pracy (Ÿród³o: opracowanie w³asne)}
	\end{figure}
	\newline
	Listy pokazane na obrazkach wymieniaj¹ kilka podstawowych parametrów, których powinni trzymaæ siê artyœci podczas ich tworzenia. S¹ to w przypadku siatek 3d:
	\begin{itemize}
		\item Nazwa wstêpna (tutaj jeszcze niekoniecznie zgodna z nazewnictwem przyjêtym ostatecznie w silniku).
		\item Kierunek tilingu: tutaj wiêkszoœæ siatek wykorzystuje jeden lub nie umo¿liwia tilingu w ogóle (jak na przyk³ad elementy ozdobne ustawiane swobodnie w scenie)
		\item Iloœæ wariantów kolorystycznych: w przypadku modu³ów wykorzystywanych wielokrotnie, liczba oznacza liczbê modeli wykonanych tak samo pod wzglêdem geometrii, jednak ró¿ni¹cych siê wygl¹dem (przy zmianie parametrów teksturowania, blendingu lub innych rozwi¹zaniach pozwalaj¹cych na urozmaicenie wygl¹du siatek)
		\item Wymiary w scenie. Finalne rozmiary ka¿dego z modeli (uwzglêdniaj¹ce skalê silnika i dopasowanie do gridu). Ma to na celu narzucenie grafikowi wymagañ, które bêd¹ musia³y byæ spe³nione przez ca³y czas tworzenia projektu. Dziêki temu mo¿liwe bêdzie uk³adanie w scenie assetów na bardzo wczesnym etapie produkcji.
	\end{itemize}
	Podczas tworzenia listy tekstur dodano jeszcze dwa aspekty, które wczeœniej nie by³y istotne, a maj¹ wielkie znaczenie podczas tworzenia dwuwymiarowych grafik:
	\begin{itemize}
		\item Atlas tekstur, w którym znalaz³a siê dana grafika. W przypadku tej pracy wszystkie grafiki zosta³y zamieszczone w jednym atlasie, jednak podczas tworzenia wiêkszych paczek czêsto konieczny jest podzia³ na kilka.
		\item Rozmieszczenie w danym atlasie. Takie podejœcie pokazuje dwie bardzo wa¿ne rzeczy: jak obszerny jest atlas i ile wolnego miejsca pozosta³o na inne tekstury, a tak¿e pozwala na wstêpne roz³o¿enie koordynatów UV obiektów zanim powstan¹ finalne tekstury wykorzystywane w paczce.
	\end{itemize}
	W przypadku tworzenia assetów przez wiêkszy zespó³, taka lista mo¿e zostaæ podzielona na mniejsze fragmenty i udostêpniona jako zbiór zadañ do wykonania, a nastêpnie rozdzielona pomiêdzy poszczególnych twórców za pomoc¹ narzêdzi takich, jak \textit{Trello} (dla ma³ych zespo³ów), czy te¿ \textit{Redmine} (w przypadku bardziej rozbudowanych grup). \newline
	
	\textbf{Grid, parametry eksportu i nazewnictwo}. \newline
	
	Wszystkie trójwymiarowe modele wykorzystane w pracy zosta³y wymodelowane w programie \textit{Autodesk 3ds Max 2016}, z którego nastêpnie eksportowano je do silnika 3d - \textit{Unreal Engine 4}. Poniewa¿ docelowa technologia domyœlnie stosuje system jednostek oparty o centymetry (1 unit w silniku to odpowiednik 1 cm), wymagane by³o dostosowanie ustawieñ narzêdzi do modelowania dla wygodniejszej pracy. Domyœlna jednostka miary zosta³a zmieniona na 1 cm, a kolejne linie gridu zosta³y rozmieszczone co 100 cm. \newline
	
	Import modeli do \textit{Unreal Engine 4} odbywa siê poprzez pliki w formacie fbx, które domyœlnie s¹ obs³ugiwane przez wiêkszoœæ dostêpnych na rynku programów do obróbki grafiki trójwymiarowej. Silnik ma kilka wymagañ w kwestii parametrów siatek, które mo¿e zaimportowaæ. Najwa¿niejsze z nich, to:
	\begin{itemize}
		\item W pliku Ÿród³owym powinny znaleŸæ siê grupy wyg³adzania dla ka¿dej siatki.
		\item Jednostk¹ miary powinien byæ centymetr, aby unikn¹æ ich skalowania.
	\end{itemize}
	Po dokonaniu zmian w ustawieniach eksportera, 3ds max umo¿liwia zapisanie ich w postaci presetu. Pozwala to na szybkie przywrócenie ustawieñ w razie ich utraty oraz dystrybucjê pomiêdzy innych cz³onków zespo³u, gdy¿ pliki z presetami mo¿na przenosiæ miêdzy komputerami. \newline
	
	Odpowiednie nazewnictwo jest bardzo wa¿ne dla dobrej wspó³pracy na linii projektant - grafik modeluj¹cy assety. W pracy wykorzystano nieco uproszczony system pochodz¹cy z firmy Bethesda Softworks, który opisany by³ w rozdziale trzecim. Wspomniane uproszczenie polega na nieu¿ywaniu fragmentów odpowiedzialnych za wyró¿nianie kilku warstw pakietów w którym znajduje siê dany model oraz wyrzuceniu czêœci dotycz¹cej odbiæ lustrzanych. Dodano równie¿ rozdzielaj¹cy poszczególne cz³ony nazwy znak ''\_'', co ma na celu poprawê czytelnoœci. Przyk³adow¹ nazwê u¿yt¹ dla siatki odwzorowuj¹cej œcianê mo¿na zobaczyæ na rysunku 4.5:
		\begin{figure}[!ht]
			\centering
			\includegraphics[scale = 1.30]{figures/My_naming}
			\caption{Przyk³adowa nazwa modelu w projekcie (Ÿród³o: opracowanie w³asne)}
		\end{figure}
	Analiza poszczególnych cz³onów nazwy:
	\begin{itemize}
		\item \textbf{Shr} - stworzony pakiet zosta³ nazwany ''Shrine'', co z angielskiego oznacza ''œwi¹tynia'' - pierwsze trzy litery wyrazy pos³u¿y³y do zgrupowania wszystkich modeli w jeden pakiet.
		\item \textbf{wall} - okreœla, ¿e jest to fragment œciany
		\item \textbf{corn} - mówi, ¿e element jest naro¿nikiem
		\item \textbf{R} - okreœla kierunek, w którym skrêca naro¿nik - w tym wypadku w prawo
		\item \textbf{mid} - kierunek tilingu - wertykalnie
		\item \textbf{02} - oznacza, ¿e jest to drugi wariant wizualny tego modelu
	\end{itemize}
\section{Faza prototypowania}
Szybkie, iteracyjne prototypowanie jest szczególnie wa¿ne, jeœli chce siê unikn¹æ du¿ych problemów z ustawieniem obiektów w póŸniejszych etapach projektu. Tutaj skupiono siê przede wszystkim na odpowiednim ustawieniem pivotów dla ka¿dego z nich. Modele i tekstury w tej fazie produkcji jeszcze dalekie s¹ od swojej finalnej formy, jednak po jej zakoñczeniu nale¿y pamiêtaæ, ¿e pewne parametry nie powinny zostaæ ju¿ zmieniane do samego koñca projektu:
\begin{itemize}
	\item wymiary (d³ugoœæ, szerokoœæ, wysokoœæ w przypadku siatek, po³o¿enie w atlasie dla tekstur)
	\item pivoty
	\item nazwy
\end{itemize}
Kieruj¹c siê t¹ zasad¹ zosta³y wytworzone modele gotowe do wstêpnego uk³adania w silniku. Dziêki temu ³atwo jest unikn¹æ problemów, gdy w wiêkszym zespole, w którym równolegle pracuj¹ zespo³y projektantów i grafików praca jednych zostanie bardzo skomplikowana przez drugich. W takim wypadku warto równie¿ umieœciæ informacje o umiejscowieniu pivotów w dokumentacji projektowej (na przyk³ad na liœcie assetów).  \newline

Na rysunku 4.6 mo¿na zobaczyæ przyk³adowe umiejscowienia pivotów dla dwóch modeli utworzonych podczas tej fazy. Pierwszy z nich (misa) ma go w œrodkowo-dolnej czêœci, aby ³atwo by³o go ustawiaæ w dowolnym miejscu na pod³odze. Jak ³atwo zauwa¿yæ - jest to obiekt, w którym wybór punktu opiera³ siê o jego potencjalne u³o¿enie w œrodowisku. W drugim z obiektów obrano miejsce przy dolnej krawêdzi na pocz¹tku siatki. Tutaj czynnikiem decyduj¹cym by³ tiling, gdy¿ jest to fragment œciany, który musi idealnie pasowaæ do innych podczas uk³adania w silniku.
	\begin{figure}[!ht]
		\centering
		\includegraphics[scale = 0.35]{figures/My_Pivots}
		\caption{Umiejscowienie pivotów w zale¿noœci od zastosowania modelu (Ÿród³o: opracowanie w³asne)}
	\end{figure}

\section{Faza finalizowania}